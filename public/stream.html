<!DOCTYPE html>
<html>
    <head>
        <title>Zego Viewer</title>
        <script src="dist_js/ZegoExpressWebRTC-3.9.0.js"></script>
    </head>
    <body>
        <h2>Zego Viewer</h2>
        <div
            id="video-container"
            style="width: 640px; height: 360px; background: #ddd"
        ></div>
        <button onclick="startViewing()">Start Watching</button>

        <script>
            async function startViewing() {
                const res = await fetch("/stream-info");
                const data = await res.json();

                const zg = new ZegoExpressEngine(data.appID, data.appSign);

                await zg.loginRoom(data.roomID, 1, {
                    userID: data.userID,
                    userName: data.userName,
                });

                const container = document.getElementById("video-container");

                // ✅ Use actual stream ID from dashboard
                const streamID = "streaming_001";

                zg.startPlayingStream(streamID, { 
                    container: container,
                    muted: true,
                });

                console.log("✅ Playing:", streamID);
            }
        </script>
    </body>
</html>
