<!DOCTYPE html>
<html>
<head>
  <title>Zego Viewer</title>
  <script src="/public/ZegoExpressEngine.min.js"></script>
</head>
<body>
  <h2>Zego Viewer</h2>
  <div id="video-container" style="width: 640px; height: 360px; background: #ddd;"></div>
  <button onclick="startViewing()">Start Watching</button>

  <script>
    async function startViewing() {
      const res = await fetch("/stream-info");
      const data = await res.json();

      const zg = new ZegoExpressEngine(data.appID, data.appSign);

      await zg.loginRoom(data.roomID, 1, {
        userID: data.userID,
        userName: data.userName,
      });

      const container = document.getElementById("video-container");

      // ✅ Use actual stream ID from dashboard
      const streamID = "stream_001_host_1748895299669_main";

      zg.startPlayingStream(streamID, {
        container: container,
      });

      console.log("✅ Playing:", streamID);
    }
  </script>
</body>
</html>
